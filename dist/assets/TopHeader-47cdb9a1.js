import{r as t,c as L,s as j,d as B,P,e as $,G as R,C as M,j as y,m as E,a as s,L as U,Q as A,f as H,F as K,b as O}from"./index-d1bcf438.js";import{b as G,_ as W}from"./slugify-5e1f0bd6.js";function z(){const e=t.useRef(!1);return L(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function D(){const e=z(),[o,r]=t.useState(0),n=t.useCallback(()=>{e.current&&r(o+1)},[o]);return[t.useCallback(()=>j.postRender(n),[n]),o]}class V extends t.Component{getSnapshotBeforeUpdate(o){const r=this.props.childRef.current;if(r&&o.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function J({children:e,isPresent:o}){const r=t.useId(),n=t.useRef(null),d=t.useRef({width:0,height:0,top:0,left:0});return t.useInsertionEffect(()=>{const{width:u,height:c,top:a,left:g}=d.current;if(o||!n.current||!u||!c)return;n.current.dataset.motionPopId=r;const p=document.createElement("style");return document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            top: ${a}px !important;
            left: ${g}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[o]),t.createElement(V,{isPresent:o,childRef:n,sizeRef:d},t.cloneElement(e,{ref:n}))}const C=({children:e,initial:o,isPresent:r,onExitComplete:n,custom:d,presenceAffectsLayout:u,mode:c})=>{const a=B(Q),g=t.useId(),p=t.useMemo(()=>({id:g,initial:o,isPresent:r,custom:d,onExitComplete:f=>{a.set(f,!0);for(const i of a.values())if(!i)return;n&&n()},register:f=>(a.set(f,!1),()=>a.delete(f))}),u?void 0:[r]);return t.useMemo(()=>{a.forEach((f,i)=>a.set(i,!1))},[r]),t.useEffect(()=>{!r&&!a.size&&n&&n()},[r]),c==="popLayout"&&(e=t.createElement(J,{isPresent:r},e)),t.createElement(P.Provider,{value:p},e)};function Q(){return new Map}function Y(e){return t.useEffect(()=>()=>e(),[])}const x=e=>e.key||"";function X(e,o){e.forEach(r=>{const n=x(r);o.set(n,r)})}function Z(e){const o=[];return t.Children.forEach(e,r=>{t.isValidElement(r)&&o.push(r)}),o}const se=({children:e,custom:o,initial:r=!0,onExitComplete:n,exitBeforeEnter:d,presenceAffectsLayout:u=!0,mode:c="sync"})=>{let[a]=D();const g=t.useContext($).forceRender;g&&(a=g);const p=z(),f=Z(e);let i=f;const h=new Set,b=t.useRef(i),w=t.useRef(new Map).current,v=t.useRef(!0);if(L(()=>{v.current=!1,X(f,w),b.current=i}),Y(()=>{v.current=!0,w.clear(),h.clear()}),v.current)return t.createElement(t.Fragment,null,i.map(l=>t.createElement(C,{key:x(l),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:u,mode:c},l)));i=[...i];const k=b.current.map(x),N=f.map(x),I=k.length;for(let l=0;l<I;l++){const m=k[l];N.indexOf(m)===-1&&h.add(m)}return c==="wait"&&h.size&&(i=[]),h.forEach(l=>{if(N.indexOf(l)!==-1)return;const m=w.get(l);if(!m)return;const S=k.indexOf(l),F=()=>{w.delete(l),h.delete(l);const T=b.current.findIndex(_=>_.key===l);if(b.current.splice(T,1),!h.size){if(b.current=f,p.current===!1)return;a(),n&&n()}};i.splice(S,0,t.createElement(C,{key:x(m),isPresent:!1,onExitComplete:F,custom:o,presenceAffectsLayout:u,mode:c},m))}),i=i.map(l=>{const m=l.key;return h.has(m)?l:t.createElement(C,{key:x(l),isPresent:!0,presenceAffectsLayout:u,mode:c},l)}),t.createElement(t.Fragment,null,h.size?i:i.map(l=>t.cloneElement(l)))},q="/assets/no-image-4fe86bf4.jpg";function ee(e){return R({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 0 0 .6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0 0 46.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]})(e)}function te(e){return R({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 0 0 .6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0 0 46.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]})(e)}function oe({movie:e}){const{user:o}=t.useContext(M),[r,n]=t.useState(null);t.useEffect(()=>{localStorage.getItem(e.id)?n(!0):n(!1)},[e.id]);const d=()=>{o?(n(!r),r?localStorage.removeItem(e.id):localStorage.setItem(e.id,JSON.stringify(e))):A.info("To bookmark this movie, please log in.")};return y(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},layout:!0,className:"card relative w-full md:w-64 h-[420px] md:h-[380px] my-3 mx-4 md:my-5 md:mx-0 cursor-pointer rounded-2xl overflow-hidden shadow-2xl border border-white/10 bg-gradient-to-b from-transparent to-black/50",whileHover:{y:-8},transition:{type:"spring",stiffness:300,damping:30},children:[s(E.button,{className:"absolute glass text-white p-2.5 z-20 right-0 m-4 rounded-xl text-lg border border-white/20 shadow-lg",onClick:d,whileHover:{scale:1.1},whileTap:{scale:.9},children:r?s(ee,{className:"text-yellow-400"}):s(te,{})}),y("div",{className:"absolute bottom-0 w-full p-4 z-20 shadowbackdrop",children:[y("div",{className:"flex justify-between items-end gap-3",children:[s("h1",{className:"text-white text-lg font-semibold leading-tight flex-1 line-clamp-2",children:e.title||e.name}),s("div",{className:"flex-shrink-0",children:(e.vote_average||0)>7?s("div",{className:"glass border border-green-400/30 px-3 py-1.5 rounded-lg",children:s("span",{className:"font-bold text-green-400 text-sm",children:(e.vote_average||0).toFixed(1)})}):(e.vote_average||0)>5.5?s("div",{className:"glass border border-orange-400/30 px-3 py-1.5 rounded-lg",children:s("span",{className:"font-bold text-orange-400 text-sm",children:(e.vote_average||0).toFixed(1)})}):s("div",{className:"glass border border-red-400/30 px-3 py-1.5 rounded-lg",children:s("span",{className:"font-bold text-red-400 text-sm",children:(e.vote_average||0).toFixed(1)})})})]}),e.release_date&&s("p",{className:"text-gray-300 text-sm mt-2 opacity-80",children:new Date(e.release_date).getFullYear()})]}),s(U,{to:`/moviedetail/${e.id}`,className:"h-full w-full absolute z-10 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"}),s("div",{children:e.poster_path===null?s("img",{className:"img object-cover",src:q}):s(G.LazyLoadImage,{effect:"blur",className:"img object-cover",src:"https://image.tmdb.org/t/p/w500"+e.poster_path})})]})}function ae(){t.useContext(M);const[e,o]=t.useState(""),r=H(),[n,d]=t.useState(null),u=()=>{n&&clearTimeout(n);const a=setTimeout(()=>{c(e)},500);d(a)},c=a=>{a!==""&&(a=a.trim(),r(a===""?"/":`/search/${W(a)}`))};return y(K,{children:[s(O,{children:s("title",{children:"MovieMate"})}),s("div",{className:"w-full glass border-b border-white/10 sticky top-0 z-40 backdrop-blur-xl",children:s("div",{className:"flex items-center justify-center px-6 py-4",children:s("div",{className:"w-full max-w-lg",children:y("div",{className:"relative",children:[s("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s("input",{type:"search",name:"searchpanel",id:"searchpanel",placeholder:"Search movies, shows, and more...",className:"w-full pl-10 pr-4 py-2.5 glass rounded-lg outline-none text-white placeholder-gray-400 border border-white/20 focus:border-red-400/50 focus:ring-1 focus:ring-red-400/20 transition-all duration-300 text-sm backdrop-blur-xl",onKeyUp:a=>u(),value:e,onChange:a=>o(a.target.value)}),e&&s("button",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-white transition-colors duration-200",onClick:()=>o(""),children:s("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})})})]})}export{se as A,oe as M,ae as T};
