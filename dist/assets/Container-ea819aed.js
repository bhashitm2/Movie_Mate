import{r as o,C as p,j as i,a as e,m as b,F as g,u as y,L as C,H as M}from"./index-82022d4e.js";import{A as v,M as N,T as j}from"./TopHeader-b32df18e.js";import{G as k}from"./Genre-d14846ff.js";import"./slugify-27e7d9a2.js";function L(){const{movies:s,loader:c,loadingMore:r,page:a,setPage:m,totalPage:t,setMovies:h,activegenre:f,filteredGenre:x}=o.useContext(p);o.useEffect(()=>{h([]),m(1)},[f]),o.useEffect(()=>{a>0&&x()},[a,f]);const u=()=>{a<t&&!r&&m(a+1)},l=d=>{d!==a&&d>=1&&d<=t&&!r&&(h([]),m(d))};return i("div",{className:"w-full mb-20 md:mb-0",children:[e(k,{}),e(b.div,{layout:!0,className:"flex flex-wrap relative justify-evenly md:justify-around",children:e(v,{children:c?e("div",{className:"w-full flex justify-center py-10",children:e("span",{className:"loader"})}):e("div",{className:"w-full md:p-2 flex flex-wrap relative justify-evenly md:justify-around",children:s.map(d=>e(N,{movie:d},`${d.id}-${a}`))})})}),!c&&s.length>0&&i("div",{className:"flex flex-col items-center mt-8 space-y-4",children:[a<t&&e("button",{onClick:u,disabled:r,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:r?i(g,{children:[e("span",{className:"loader-small"}),e("span",{children:"Loading..."})]}):"Load More Movies"}),i("div",{className:"text-gray-400 text-sm text-center",children:["Page ",a," of ",t," â€¢ ",s.length," movies loaded",a===t&&e("div",{className:"text-green-400 mt-1",children:"All movies loaded!"})]}),i("div",{className:"flex items-center space-x-2 flex-wrap justify-center",children:[e("button",{onClick:()=>l(1),disabled:a===1||r,className:"px-3 py-2 bg-gray-700 text-white rounded hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"First"}),e("button",{onClick:()=>l(a-1),disabled:a===1||r,className:"px-3 py-2 bg-gray-700 text-white rounded hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e("div",{className:"flex space-x-1",children:Array.from({length:Math.min(5,t)},(d,w)=>{const n=Math.max(1,Math.min(t-4,a-2))+w;return n<=t?e("button",{onClick:()=>l(n),disabled:r,className:`px-3 py-2 rounded transition-colors ${n===a?"bg-red-600 text-white":"bg-gray-700 text-white hover:bg-red-600"} disabled:opacity-50`,children:n},n):null})}),e("button",{onClick:()=>l(a+1),disabled:a===t||r,className:"px-3 py-2 bg-gray-700 text-white rounded hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"}),e("button",{onClick:()=>l(t),disabled:a===t||r,className:"px-3 py-2 bg-gray-700 text-white rounded hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Last"})]})]})]})}function P(){const{searchedMovies:s,loader:c,page:r,setPage:a,totalPage:m,setMovies:t,activegenre:h,filteredGenre:f,fetchSearch:x}=o.useContext(p),{query:u}=y();return o.useEffect(()=>{x(u)},[u]),i("section",{children:[e(C,{to:"/",className:"fixed z-10 text-2xl glass text-white p-3 m-3 md:m-5 rounded-xl border border-white/20 hover:border-red-400/40 transition-all duration-300",children:e(M,{})}),e("div",{className:"w-full mb-20 md:mb-0",children:e(b.div,{layout:!0,className:"flex flex-wrap relative justify-evenly md:justify-around",children:e(v,{children:c?e("span",{className:"loader m-10"}):e(g,{children:s.map(l=>e(N,{movie:l},l.id))})})})})]})}function H(){o.useContext(p);const{query:s}=y();return i("section",{children:[e(j,{}),e("div",{className:"px-6 py-4",children:s?e(P,{query:s}):e(L,{})})]})}export{H as default};
